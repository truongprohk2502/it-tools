import { checkTableExist } from "@/utils/sql";
import type { Database } from "sql.js";

export const createAdmissionsTable = (db: Database) => {
  const isExist = checkTableExist(db, "admissions");

  if (isExist) return;

  // Create table
  db.run(`CREATE TABLE admissions (
    patient_id INTEGER NOT NULL PRIMARY KEY,
    admission_date DATE NOT NULL,
    discharge_date DATE NOT NULL,
    diagnosis TEXT NOT NULL,
    attending_doctor_id INTEGER NOT NULL,
    FOREIGN KEY(attending_doctor_id) REFERENCES doctors(doctor_id)
  )`);

  // Insert data
  db.run(`INSERT INTO admissions (patient_id, admission_date, discharge_date, diagnosis, attending_doctor_id) VALUES
    (1, '2023-01-01', '2023-01-05', 'Flu', 5),
    (2, '2023-01-02', '2023-01-06', 'Cold', 7),
    (3, '2023-01-03', '2023-01-07', 'Flu', 3),
    (4, '2023-01-04', '2023-01-08', 'Headache', 10),
    (5, '2023-01-05', '2023-01-09', 'Cold', 1),
    (6, '2023-01-06', '2023-01-10', 'Back Pain', 12),
    (7, '2023-01-07', '2023-01-11', 'Flu', 4),
    (8, '2023-01-08', '2023-01-12', 'Anxiety', 15),
    (9, '2023-01-09', '2023-01-13', 'Headache', 2),
    (10, '2023-01-10', '2023-01-14', 'Cold', 8),
    (11, '2023-01-11', '2023-01-15', 'Flu', 9),
    (12, '2023-01-12', '2023-01-16', 'Back Pain', 14),
    (13, '2023-01-13', '2023-01-17', 'Anxiety', 18),
    (14, '2023-01-14', '2023-01-18', 'Headache', 6),
    (15, '2023-01-15', '2023-01-19', 'Flu', 11),
    (16, '2023-01-16', '2023-01-20', 'Cold', 13),
    (17, '2023-01-17', '2023-01-21', 'Back Pain', 17),
    (18, '2023-01-18', '2023-01-22', 'Anxiety', 19),
    (19, '2023-01-19', '2023-01-23', 'Cold', 20),
    (20, '2023-01-20', '2023-01-24', 'Flu', 1),
    (21, '2023-01-21', '2023-01-25', 'Anxiety', 8),
    (22, '2023-01-22', '2023-01-26', 'Headache', 2),
    (23, '2023-01-23', '2023-01-27', 'Back Pain', 5),
    (24, '2023-01-24', '2023-01-28', 'Flu', 12),
    (25, '2023-01-25', '2023-01-29', 'Cold', 14),
    (26, '2023-01-26', '2023-01-30', 'Anxiety', 15),
    (27, '2023-01-27', '2023-01-31', 'Flu', 3),
    (28, '2023-01-28', '2023-02-01', 'Cold', 20),
    (29, '2023-01-29', '2023-02-02', 'Back Pain', 6),
    (30, '2023-01-30', '2023-02-03', 'Headache', 11),
    (31, '2023-01-31', '2023-02-04', 'Flu', 4),
    (32, '2023-02-01', '2023-02-05', 'Anxiety', 7),
    (33, '2023-02-02', '2023-02-06', 'Cold', 19),
    (34, '2023-02-03', '2023-02-07', 'Headache', 10),
    (35, '2023-02-04', '2023-02-08', 'Back Pain', 9),
    (36, '2023-02-05', '2023-02-09', 'Flu', 1),
    (37, '2023-02-06', '2023-02-10', 'Cold', 15),
    (38, '2023-02-07', '2023-02-11', 'Anxiety', 14),
    (39, '2023-02-08', '2023-02-12', 'Headache', 16),
    (40, '2023-02-09', '2023-02-13', 'Flu', 12),
    (41, '2023-02-10', '2023-02-14', 'Cold', 17),
    (42, '2023-02-11', '2023-02-15', 'Anxiety', 22),
    (43, '2023-02-12', '2023-02-16', 'Headache', 5),
    (44, '2023-02-13', '2023-02-17', 'Back Pain', 3),
    (45, '2023-02-14', '2023-02-18', 'Cold', 2),
    (46, '2023-02-15', '2023-02-19', 'Flu', 6),
    (47, '2023-02-16', '2023-02-20', 'Anxiety', 18),
    (48, '2023-02-17', '2023-02-21', 'Flu', 9),
    (49, '2023-02-18', '2023-02-22', 'Cold', 11),
    (50, '2023-02-19', '2023-02-23', 'Back Pain', 4)
  `);
};
